<!DOCTYPE html>
<html lang="vi">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Happy Birthday üç∞</title>
  <script src="https://upload-widget.cloudinary.com/global/all.js" type="text/javascript"></script>
  <style>
    * {
      margin: 0;
      padding: 0;
      box-sizing: border-box;
      font-family: 'Arial', sans-serif;
    }

    body {
      background: linear-gradient(135deg, #ff9a9e 0%, #fad0c4 100%);
      min-height: 100vh;
      display: flex;
      flex-direction: column;
      align-items: center;
      padding: 20px;
      color: #333;
    }

    .container {
      max-width: 800px;
      width: 100%;
      background: white;
      border-radius: 20px;
      box-shadow: 0 10px 30px rgba(0, 0, 0, 0.1);
      overflow: hidden;
      margin-bottom: 30px;
    }

    header {
      background: #ff4d6d;
      color: white;
      text-align: center;
      padding: 20px;
    }

    h1 {
      font-size: 2.5rem;
      margin-bottom: 10px;
    }

    .subtitle {
      font-size: 1.2rem;
      opacity: 0.9;
    }

    .content {
      padding: 30px;
    }

    .form-section {
      margin-bottom: 30px;
    }

    h2 {
      color: #ff4d6d;
      margin-bottom: 15px;
      font-size: 1.5rem;
    }

    .input-group {
      margin-bottom: 20px;
    }

    label {
      display: block;
      margin-bottom: 8px;
      font-weight: bold;
      color: #555;
    }

    input, textarea {
      width: 100%;
      padding: 12px 15px;
      border: 2px solid #e0e0e0;
      border-radius: 10px;
      font-size: 1rem;
      transition: border-color 0.3s;
    }

    input:focus, textarea:focus {
      border-color: #ff4d6d;
      outline: none;
    }

    textarea {
      min-height: 120px;
      resize: vertical;
    }

    .btn {
      background: #ff4d6d;
      color: white;
      border: none;
      padding: 14px 30px;
      border-radius: 50px;
      font-size: 1.1rem;
      font-weight: bold;
      cursor: pointer;
      transition: all 0.3s;
      display: block;
      margin: 0 auto;
      box-shadow: 0 4px 15px rgba(255, 77, 109, 0.3);
    }

    .btn:hover {
      background: #ff3355;
      transform: translateY(-2px);
      box-shadow: 0 6px 20px rgba(255, 77, 109, 0.4);
    }

    .preview-section {
      background: #f9f9f9;
      padding: 25px;
      border-radius: 15px;
      margin-top: 30px;
      text-align: center;
    }

    .preview-title {
      color: #ff4d6d;
      margin-bottom: 15px;
    }

    .preview-content {
      background: white;
      padding: 20px;
      border-radius: 10px;
      box-shadow: 0 3px 10px rgba(0, 0, 0, 0.05);
      margin-bottom: 20px;
    }

    .preview-image {
      max-width: 100%;
      border-radius: 10px;
      margin-bottom: 15px;
    }

    .hidden {
      display: none;
    }

    .share-section {
      text-align: center;
      margin-top: 20px;
      padding: 20px;
      background: #f0f8ff;
      border-radius: 15px;
    }

    .share-link {
      background: white;
      padding: 15px;
      border-radius: 10px;
      margin: 15px 0;
      word-break: break-all;
      font-family: monospace;
      border: 2px dashed #ff4d6d;
    }

    .copy-btn {
      background: #4CAF50;
      margin-top: 10px;
    }

    .copy-btn:hover {
      background: #45a049;
    }

    .hosting-info {
      margin-top: 30px;
      padding: 20px;
      background: #f8f9fa;
      border-radius: 15px;
      border-left: 5px solid #ff4d6d;
    }

    .hosting-info h3 {
      color: #ff4d6d;
      margin-bottom: 15px;
      font-size: 1.2rem;
    }

    .hosting-options {
      display: grid;
      gap: 15px;
      margin-bottom: 15px;
    }

    .option {
      background: white;
      padding: 15px;
      border-radius: 10px;
      box-shadow: 0 2px 5px rgba(0, 0, 0, 0.1);
    }

    .option strong {
      color: #ff4d6d;
      display: block;
      margin-bottom: 8px;
    }

    .option p {
      margin: 0;
      line-height: 1.5;
      color: #555;
    }

    .note {
      background: #fff3cd;
      border: 1px solid #ffeaa7;
      padding: 12px;
      border-radius: 8px;
      margin: 0;
      color: #856404;
      font-size: 0.9rem;
    }

    .valentine-display {
      text-align: center;
      padding: 30px;
    }

    .valentine-name {
      font-size: 2.5rem;
      color: #ff4d6d;
      margin: 20px 0;
    }

    .valentine-message {
      font-size: 1.2rem;
      line-height: 1.6;
      margin: 20px 0;
      padding: 20px;
      background: #fff9f9;
      border-radius: 15px;
      border-left: 5px solid #ff4d6d;
    }

    .gallery {
      --d: 10s;
      display: grid;
      place-items: center;
      width: 220px;
      margin: 30px auto;
    }

    .gallery > img {
      grid-area: 1/1;
      width: 100%;
      aspect-ratio: 1;
      object-fit: cover;
      border: 10px solid #f2f2f2;
      box-shadow: 0 0 4px #0007;
      z-index: 2;
      animation: slide var(--d) infinite, z-order var(--d) infinite steps(1);
    }

    .gallery img:last-child {
      animation-name: slide, z-order-last;
    }

    .gallery > img:nth-child(1) { animation-delay: calc(0*var(--d)); --r: 16deg; }
    .gallery > img:nth-child(2) { animation-delay: calc(-0.2*var(--d)); --r: -1deg; }
    .gallery > img:nth-child(3) { animation-delay: calc(-0.4*var(--d)); --r: -19deg; }
    .gallery > img:nth-child(4) { animation-delay: calc(-0.6*var(--d)); --r: 6deg; }
    .gallery > img:nth-child(5) { animation-delay: calc(-0.8*var(--d)); --r: -8deg; }

    @keyframes slide {
      10% { transform: translateX(120%) rotate(var(--r)); }
      0%, 100%, 20% { transform: translateX(0%) rotate(var(--r)); }
    }

    @keyframes z-order {
      10%, 20% { z-index: 1; }
      80% { z-index: 2; }
    }

    @keyframes z-order-last {
      10%, 20% { z-index: 1; }
      90% { z-index: 2; }
    }

    .back-btn {
      background: #6c757d;
      margin-top: 20px;
    }

    .back-btn:hover {
      background: #5a6268;
    }

    .image-preview {
      margin-top: 15px;
      text-align: center;
      padding: 15px;
      background: #f9f9f9;
      border-radius: 10px;
      border: 2px dashed #ff4d6d;
    }

    .image-preview img {
      max-width: 120px;
      max-height: 120px;
      border-radius: 10px;
      box-shadow: 0 4px 10px rgba(0, 0, 0, 0.1);
      margin: 5px;
      object-fit: cover;
    }

    #preview-container {
      display: flex;
      flex-wrap: wrap;
      justify-content: center;
      gap: 10px;
      margin-bottom: 15px;
    }

    .preview-item {
      position: relative;
      display: inline-block;
    }

    .preview-item .remove-single {
      position: absolute;
      top: -5px;
      right: -5px;
      background: #dc3545;
      color: white;
      border: none;
      border-radius: 50%;
      width: 25px;
      height: 25px;
      font-size: 12px;
      cursor: pointer;
      display: flex;
      align-items: center;
      justify-content: center;
    }

    .remove-btn {
      background: #dc3545;
      color: white;
      border: none;
      padding: 8px 15px;
      border-radius: 20px;
      font-size: 0.9rem;
      cursor: pointer;
      transition: all 0.3s;
    }

    .remove-btn:hover {
      background: #c82333;
      transform: translateY(-1px);
    }

    input[type="file"] {
      padding: 8px;
      border: 2px dashed #ff4d6d;
      border-radius: 10px;
      background: #fff9f9;
      cursor: pointer;
      transition: all 0.3s;
    }

    .image-selection {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(150px, 1fr));
      gap: 15px;
      margin: 15px 0;
    }

    .image-option {
      position: relative;
    }

    .image-option input[type="checkbox"] {
      display: none;
    }

    .image-label {
      display: block;
      cursor: pointer;
      border: 3px solid #e0e0e0;
      border-radius: 15px;
      padding: 10px;
      text-align: center;
      transition: all 0.3s;
      background: white;
    }

    .image-label:hover {
      border-color: #ff4d6d;
      transform: translateY(-2px);
      box-shadow: 0 4px 15px rgba(255, 77, 109, 0.2);
    }

    .image-option input[type="checkbox"]:checked + .image-label {
      border-color: #ff4d6d;
      background: #fff9f9;
      box-shadow: 0 4px 15px rgba(255, 77, 109, 0.3);
    }

    .image-label img {
      width: 100%;
      height: 100px;
      object-fit: cover;
      border-radius: 10px;
      margin-bottom: 8px;
    }

    .image-label span {
      display: block;
      font-weight: bold;
      color: #555;
      font-size: 0.9rem;
    }

    .selected-preview {
      margin-top: 20px;
      padding: 15px;
      background: #f9f9f9;
      border-radius: 10px;
      border: 2px dashed #ff4d6d;
    }

    .selected-preview h4 {
      color: #ff4d6d;
      margin-bottom: 10px;
    }

    #selected-container {
      display: flex;
      flex-wrap: wrap;
      gap: 10px;
    }

    .selected-item {
      position: relative;
      display: inline-block;
    }

    .selected-item img {
      width: 80px;
      height: 80px;
      object-fit: cover;
      border-radius: 8px;
      border: 2px solid #ff4d6d;
    }

    .upload-btn {
      background: #28a745;
      margin-bottom: 20px;
      width: 100%;
    }

    .upload-btn:hover {
      background: #218838;
    }

    .divider {
      text-align: center;
      margin: 20px 0;
      position: relative;
    }

    .divider::before {
      content: '';
      position: absolute;
      top: 50%;
      left: 0;
      right: 0;
      height: 1px;
      background: #e0e0e0;
    }

    .divider span {
      background: white;
      padding: 0 15px;
      color: #666;
      font-weight: bold;
      position: relative;
    }

    .remove-cloudinary {
      position: absolute;
      top: -8px;
      right: -8px;
      background: #dc3545;
      color: white;
      border: none;
      border-radius: 50%;
      width: 20px;
      height: 20px;
      font-size: 10px;
      cursor: pointer;
      display: flex;
      align-items: center;
      justify-content: center;
    }

    .remove-cloudinary:hover {
      background: #c82333;
    }


    footer {
      text-align: center;
      margin-top: 20px;
      color: #666;
      font-size: 0.9rem;
    }

    @media only screen and (max-width: 600px) {
      h1 {
        font-size: 1.8rem;
      }
      
      .content {
        padding: 20px;
      }
      
      .gallery {
        width: 150px;
      }
    }
  </style>
</head>
<body>
  <div class="container">
    <header>
      <h1>üéÇ Happy Birthday C√° Nh√¢n H√≥a üéÇ</h1>
      <p class="subtitle">T·∫°o trang Birthday ƒë·∫∑c bi·ªát d√†nh cho ng∆∞·ªùi ·∫•y</p>
    </header>
    
    <div class="content">
      <!-- Form t·∫°o Valentine -->
      <div id="creation-section">
        <div class="form-section">
          <h2>Th√¥ng tin c·ªßa b·∫°n</h2>
          <div class="input-group">
            <label for="user-name">T√™n c·ªßa b·∫°n</label>
            <input type="text" id="user-name" placeholder="Nh·∫≠p t√™n c·ªßa b·∫°n">
          </div>
          
          <div class="input-group">
            <label for="recipient-name">T√™n ng∆∞·ªùi nh·∫≠n</label>
            <input type="text" id="recipient-name" placeholder="Nh·∫≠p t√™n ng∆∞·ªùi b·∫°n y√™u th∆∞∆°ng">
          </div>
        </div>
        
        <div class="form-section">
          <h2>L·ªùi ch√∫c sinh nh·∫≠t</h2>
          <div class="input-group">
            <label for="valentine-message">L·ªùi ch√∫c Birthday</label>
            <textarea id="valentine-message" placeholder="Vi·∫øt l·ªùi ch√∫c sinh nh·∫≠t t·ª´ tr√°i tim c·ªßa b·∫°n..."></textarea>
          </div>
        </div>
        
        <div class="form-section">
          <h2>Ch·ªçn h√¨nh ·∫£nh ƒë·∫∑c bi·ªát</h2>
          <div class="input-group">
            <label>Upload ·∫£nh m·ªõi t·ª´ m√°y t√≠nh:</label>
            <button type="button" id="upload-btn" class="btn upload-btn">üì§ Upload ·∫¢nh M·ªõi</button>
            
            <div class="divider">
              <span>HO·∫∂C</span>
            </div>
            
            <label>Ch·ªçn ·∫£nh t·ª´ th∆∞ m·ª•c hinhanh (c√≥ th·ªÉ ch·ªçn nhi·ªÅu ·∫£nh):</label>
            <div class="image-selection">
              <div class="image-option">
                <input type="checkbox" id="img1" value="hinhanh/anh1.jpg">
                <label for="img1" class="image-label">
                  <img src="hinhanh/anh1.jpg" alt="·∫¢nh 1" onerror="this.style.display='none'">
                  <span>·∫¢nh 1</span>
                </label>
              </div>
              <div class="image-option">
                <input type="checkbox" id="img2" value="hinhanh/anh2.jpg">
                <label for="img2" class="image-label">
                  <img src="hinhanh/anh2.jpg" alt="·∫¢nh 2" onerror="this.style.display='none'">
                  <span>·∫¢nh 2</span>
                </label>
              </div>
              <div class="image-option">
                <input type="checkbox" id="img3" value="hinhanh/anh3.jpg">
                <label for="img3" class="image-label">
                  <img src="hinhanh/anh3.jpg" alt="·∫¢nh 3" onerror="this.style.display='none'">
                  <span>·∫¢nh 3</span>
                </label>
              </div>
              <div class="image-option">
                <input type="checkbox" id="img4" value="hinhanh/anh4.jpg">
                <label for="img4" class="image-label">
                  <img src="hinhanh/anh4.jpg" alt="·∫¢nh 4" onerror="this.style.display='none'">
                  <span>·∫¢nh 4</span>
                </label>
              </div>
              <div class="image-option">
                <input type="checkbox" id="img5" value="hinhanh/anh5.jpg">
                <label for="img5" class="image-label">
                  <img src="hinhanh/anh5.jpg" alt="·∫¢nh 5" onerror="this.style.display='none'">
                  <span>·∫¢nh 5</span>
                </label>
              </div>
              <div class="image-option">
                <input type="checkbox" id="img6" value="hinhanh/anh6.jpg">
                <label for="img6" class="image-label">
                  <img src="hinhanh/anh6.jpg" alt="·∫¢nh 6" onerror="this.style.display='none'">
                  <span>·∫¢nh 6</span>
                </label>
              </div>
            </div>
            <div id="selected-images-preview" class="selected-preview hidden">
              <h4>·∫¢nh ƒë√£ ch·ªçn:</h4>
              <div id="selected-container"></div>
            </div>
          </div>
        </div>
        
        <button id="create-btn" class="btn">T·∫°o Birthday C·ªßa T√¥i</button>
        
        <div class="preview-section">
          <h3 class="preview-title">Xem tr∆∞·ªõc</h3>
          <div class="preview-content">
            <p id="preview-text">Sau khi nh·∫≠p th√¥ng tin, b·∫°n s·∫Ω th·∫•y xem tr∆∞·ªõc t·∫°i ƒë√¢y</p>
          </div>
        </div>
      </div>
      
      <!-- Ph·∫ßn chia s·∫ª link -->
      <div id="share-section" class="hidden">
        <div class="share-section">
          <h2>Birthday c·ªßa b·∫°n ƒë√£ s·∫µn s√†ng!</h2>
          <p>Chia s·∫ª link n√†y v·ªõi ng∆∞·ªùi ·∫•y:</p>
          <button id="copy-btn" class="btn copy-btn">Sao ch√©p Link</button>

          <div class="share-link" id="share-link">Link s·∫Ω xu·∫•t hi·ªán ·ªü ƒë√¢y</div>


          <button id="new-valentine" class="btn back-btn">T·∫°o Birthday M·ªõi</button>
        </div>
      </div>
      
      <!-- Ph·∫ßn hi·ªÉn th·ªã Birthday -->
      <div id="valentine-display" class="valentine-display hidden">
        <h1 id="display-title">Happy Birthday! üéÇ</h1>
        <div class="valentine-name" id="display-recipient"></div>
        
        <div class="gallery" id="valentine-gallery">
          <!-- ·∫¢nh s·∫Ω ƒë∆∞·ª£c th√™m ƒë·ªông t·ª´ d·ªØ li·ªáu ng∆∞·ªùi d√πng -->
        </div>
        
        <div class="valentine-message" id="display-message"></div>
        <p id="display-sender" style="font-style: italic; margin-top: 20px;"></p>
      </div>
    </div>
  </div>
  
  <footer>
    <p>Made with ‚ù§Ô∏è | Duing |  Chia s·∫ª t√¨nh y√™u c·ªßa b·∫°n ƒë·∫øn m·ªçi ng∆∞·ªùi</p>
  </footer>

  <script>
    document.addEventListener('DOMContentLoaded', function() {
      const creationSection = document.getElementById('creation-section');
      const shareSection = document.getElementById('share-section');
      const valentineDisplay = document.getElementById('valentine-display');
      const createBtn = document.getElementById('create-btn');
      const copyBtn = document.getElementById('copy-btn');
      const newValentineBtn = document.getElementById('new-valentine');
      const shareLink = document.getElementById('share-link');
      
      const userNameInput = document.getElementById('user-name');
      const recipientNameInput = document.getElementById('recipient-name');
      const messageInput = document.getElementById('valentine-message');
      const selectedImagesPreview = document.getElementById('selected-images-preview');
      const selectedContainer = document.getElementById('selected-container');
      const uploadBtn = document.getElementById('upload-btn');
      
      const displayRecipient = document.getElementById('display-recipient');
      const displayMessage = document.getElementById('display-message');
      const displaySender = document.getElementById('display-sender');
      const previewText = document.getElementById('preview-text');
      
      // Ki·ªÉm tra xem c√≥ tham s·ªë URL kh√¥ng (trang hi·ªÉn th·ªã Valentine)
      const urlParams = new URLSearchParams(window.location.search);
      const valentineData = urlParams.get('data');
      
      if (valentineData) {
        // Hi·ªÉn th·ªã trang Valentine
        showValentineDisplay(valentineData);
      }
      
      // C·∫≠p nh·∫≠t preview
      function updatePreview() {
        const userName = userNameInput.value || 'B·∫°n';
        const recipientName = recipientNameInput.value || 'Ng∆∞·ªùi ·∫•y';
        const message = messageInput.value || 'L·ªùi ch√∫c t·ª´ tr√°i tim...';
        
        previewText.innerHTML = `
          <strong>${userName}</strong> g·ª≠i ƒë·∫øn <strong>${recipientName}</strong>:<br><br>
          "${message.substring(0, 100)}${message.length > 100 ? '...' : ''}"
        `;
      }
      
      userNameInput.addEventListener('input', updatePreview);
      recipientNameInput.addEventListener('input', updatePreview);
      messageInput.addEventListener('input', updatePreview);

      // M·∫£ng l∆∞u tr·ªØ ·∫£nh ƒë√£ upload t·ª´ Cloudinary
      let uploadedCloudinaryImages = [];

      // C·∫•u h√¨nh Cloudinary Upload Widget
      const cloudinaryWidget = cloudinary.createUploadWidget({
        cloudName: 'dyk8aumyf',
        uploadPreset: 'ml_default', // Upload preset c·∫ßn ƒë∆∞·ª£c t·∫°o trong Cloudinary Dashboard
        sources: ['local', 'url', 'camera'],
        multiple: true,
        maxFiles: 10,
        cropping: true,
        showAdvancedOptions: true,
        folder: 'valentine-images',
        resourceType: 'image',
        clientAllowedFormats: ['jpg', 'jpeg', 'png', 'gif', 'webp'],
        maxImageFileSize: 10000000, // 10MB
        theme: 'minimal'
      }, (error, result) => {
        if (error) {
          console.error('Upload error:', error);
          alert('L·ªói upload: ' + error.message + '\n\nVui l√≤ng ki·ªÉm tra Upload Preset trong Cloudinary Dashboard!');
          return;
        }
        
        if (result && result.event === "success") {
          // Th√™m ·∫£nh ƒë√£ upload v√†o danh s√°ch
          uploadedCloudinaryImages.push(result.info.secure_url);
          updateSelectedImages();
          console.log('Upload successful:', result.info.secure_url);
        }
      });

      // X·ª≠ l√Ω n√∫t upload
      uploadBtn.addEventListener('click', function() {
        cloudinaryWidget.open();
      });

      // X·ª≠ l√Ω ch·ªçn ·∫£nh t·ª´ checkbox
      const imageCheckboxes = document.querySelectorAll('.image-option input[type="checkbox"]');
      
      imageCheckboxes.forEach(checkbox => {
        checkbox.addEventListener('change', updateSelectedImages);
      });

      // C·∫≠p nh·∫≠t preview ·∫£nh ƒë√£ ch·ªçn
      function updateSelectedImages() {
        const selectedImages = [];
        
        // Th√™m ·∫£nh t·ª´ checkbox
        const checkedBoxes = document.querySelectorAll('.image-option input[type="checkbox"]:checked');
        checkedBoxes.forEach(checkbox => {
          selectedImages.push(checkbox.value);
        });
        
        // Th√™m ·∫£nh t·ª´ Cloudinary
        selectedImages.push(...uploadedCloudinaryImages);
        
        // Hi·ªÉn th·ªã preview
        selectedContainer.innerHTML = '';
        selectedImages.forEach((imageSrc, index) => {
          const selectedItem = document.createElement('div');
          selectedItem.className = 'selected-item';
          selectedItem.innerHTML = `
            <img src="${imageSrc}" alt="Selected">
            ${index >= checkedBoxes.length ? `<button type="button" class="remove-cloudinary" onclick="removeCloudinaryImage(${index - checkedBoxes.length})">‚úï</button>` : ''}
          `;
          selectedContainer.appendChild(selectedItem);
        });
        
        // Hi·ªÉn th·ªã/·∫©n preview section
        if (selectedImages.length > 0) {
          selectedImagesPreview.classList.remove('hidden');
        } else {
          selectedImagesPreview.classList.add('hidden');
        }
      }

      // X√≥a ·∫£nh t·ª´ Cloudinary
      window.removeCloudinaryImage = function(index) {
        uploadedCloudinaryImages.splice(index, 1);
        updateSelectedImages();
      };
      
      // T·∫°o Birthday
      createBtn.addEventListener('click', function() {
        const userName = userNameInput.value.trim();
        const recipientName = recipientNameInput.value.trim();
        const message = messageInput.value.trim();
        
        if (!userName || !recipientName || !message) {
          alert('Vui l√≤ng ƒëi·ªÅn ƒë·∫ßy ƒë·ªß th√¥ng tin!');
          return;
        }
        
        // Thu th·∫≠p ·∫£nh ƒë√£ ch·ªçn
        const selectedImages = [];
        
        // Th√™m ·∫£nh t·ª´ checkbox
        const checkedBoxes = document.querySelectorAll('.image-option input[type="checkbox"]:checked');
        checkedBoxes.forEach(checkbox => {
          selectedImages.push(checkbox.value);
        });
        
        // Th√™m ·∫£nh t·ª´ Cloudinary
        selectedImages.push(...uploadedCloudinaryImages);
        
        // T·∫°o Birthday v·ªõi ·∫£nh ƒë√£ ch·ªçn
        createValentineWithImages(userName, recipientName, message, selectedImages);
      });

      // Function t·∫°o Birthday v·ªõi ·∫£nh ƒë√£ ch·ªçn
      function createValentineWithImages(userName, recipientName, message, images) {
        // T·∫°o d·ªØ li·ªáu Birthday
        const valentineData = {
          u: userName,
          r: recipientName,
          m: message,
          images: images
        };
        
        // M√£ h√≥a d·ªØ li·ªáu th√†nh chu·ªói base64
        const encodedData = btoa(JSON.stringify(valentineData));
        
        // T·∫°o link chia s·∫ª
        const shareUrl = `${window.location.origin}${window.location.pathname}?data=${encodedData}`;
        
        // Hi·ªÉn th·ªã ph·∫ßn chia s·∫ª
        creationSection.classList.add('hidden');
        shareSection.classList.remove('hidden');
        shareLink.textContent = shareUrl;
      }
      
      // Sao ch√©p link
      copyBtn.addEventListener('click', function() {
        navigator.clipboard.writeText(shareLink.textContent)
          .then(() => {
            alert('ƒê√£ sao ch√©p link v√†o clipboard!');
          })
          .catch(err => {
            console.error('L·ªói khi sao ch√©p: ', err);
          });
      });
      
      // T·∫°o Birthday m·ªõi
      newValentineBtn.addEventListener('click', function() {
        shareSection.classList.add('hidden');
        creationSection.classList.remove('hidden');
        
        // Reset form
        userNameInput.value = '';
        recipientNameInput.value = '';
        messageInput.value = '';
        
        // B·ªè ch·ªçn t·∫•t c·∫£ ·∫£nh
        imageCheckboxes.forEach(checkbox => {
          checkbox.checked = false;
        });
        uploadedCloudinaryImages = [];
        updateSelectedImages();
        updatePreview();
      });
      
      
      // Hi·ªÉn th·ªã trang Birthday
      function showValentineDisplay(encodedData) {
        try {
          // Gi·∫£i m√£ d·ªØ li·ªáu
          const valentineData = JSON.parse(atob(encodedData));
          
          // Hi·ªÉn th·ªã th√¥ng tin
          displayRecipient.textContent = valentineData.r;
          displayMessage.textContent = valentineData.m;
          displaySender.textContent = `From: ${valentineData.u} ‚ù§Ô∏è`;
          
          // ·∫®n ph·∫ßn t·∫°o v√† hi·ªÉn th·ªã ph·∫ßn Valentine
          creationSection.classList.add('hidden');
          shareSection.classList.add('hidden');
          valentineDisplay.classList.remove('hidden');
          
          // Hi·ªÉn th·ªã ·∫£nh trong gallery
          const gallery = document.getElementById('valentine-gallery');
          gallery.innerHTML = '';
          
          // L·∫•y danh s√°ch ·∫£nh (h·ªó tr·ª£ c·∫£ format c≈© v√† m·ªõi)
          let images = [];
          if (valentineData.images && Array.isArray(valentineData.images)) {
            images = valentineData.images;
          } else if (valentineData.i) {
            images = [valentineData.i];
          }
          
          // Th√™m t·ª´ng ·∫£nh v√†o gallery
          images.forEach((imageSrc, index) => {
            const img = document.createElement('img');
            img.src = imageSrc;
            img.alt = `·∫¢nh ${index + 1}`;
            gallery.appendChild(img);
          });
          
          // Th√™m CSS animation cho c√°c ·∫£nh
          if (images.length > 0) {
            const style = document.createElement('style');
            let cssText = '';
            images.forEach((_, index) => {
              cssText += `
                .gallery > img:nth-child(${index + 1}) {
                  animation-delay: calc(-${index * 0.2}*var(--d));
                  --r: ${(index % 2 === 0 ? -1 : 1) * (5 + index * 3)}deg;
                }
              `;
            });
            style.textContent = cssText;
            document.head.appendChild(style);
          }
        } catch (error) {
          console.error('L·ªói khi gi·∫£i m√£ d·ªØ li·ªáu:', error);
          alert('Link Birthday kh√¥ng h·ª£p l·ªá!');
        }
      }
    });
  </script>
</body>
</html>
