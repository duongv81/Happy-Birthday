<!DOCTYPE html>
<html lang="vi">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>T·∫°o Valentine C√° Nh√¢n H√≥a</title>
  <style>
    * {
      margin: 0;
      padding: 0;
      box-sizing: border-box;
      font-family: 'Arial', sans-serif;
    }

    body {
      background: linear-gradient(135deg, #ff9a9e 0%, #fad0c4 100%);
      min-height: 100vh;
      display: flex;
      flex-direction: column;
      align-items: center;
      padding: 20px;
      color: #333;
    }

    .container {
      max-width: 800px;
      width: 100%;
      background: white;
      border-radius: 20px;
      box-shadow: 0 10px 30px rgba(0, 0, 0, 0.1);
      overflow: hidden;
      margin-bottom: 30px;
    }

    header {
      background: #ff4d6d;
      color: white;
      text-align: center;
      padding: 20px;
    }

    h1 {
      font-size: 2.5rem;
      margin-bottom: 10px;
    }

    .subtitle {
      font-size: 1.2rem;
      opacity: 0.9;
    }

    .content {
      padding: 30px;
    }

    .form-section {
      margin-bottom: 30px;
    }

    h2 {
      color: #ff4d6d;
      margin-bottom: 15px;
      font-size: 1.5rem;
    }

    .input-group {
      margin-bottom: 20px;
    }

    label {
      display: block;
      margin-bottom: 8px;
      font-weight: bold;
      color: #555;
    }

    input, textarea {
      width: 100%;
      padding: 12px 15px;
      border: 2px solid #e0e0e0;
      border-radius: 10px;
      font-size: 1rem;
      transition: border-color 0.3s;
    }

    input:focus, textarea:focus {
      border-color: #ff4d6d;
      outline: none;
    }

    textarea {
      min-height: 120px;
      resize: vertical;
    }

    .btn {
      background: #ff4d6d;
      color: white;
      border: none;
      padding: 14px 30px;
      border-radius: 50px;
      font-size: 1.1rem;
      font-weight: bold;
      cursor: pointer;
      transition: all 0.3s;
      display: block;
      margin: 0 auto;
      box-shadow: 0 4px 15px rgba(255, 77, 109, 0.3);
    }

    .btn:hover {
      background: #ff3355;
      transform: translateY(-2px);
      box-shadow: 0 6px 20px rgba(255, 77, 109, 0.4);
    }

    .preview-section {
      background: #f9f9f9;
      padding: 25px;
      border-radius: 15px;
      margin-top: 30px;
      text-align: center;
    }

    .preview-title {
      color: #ff4d6d;
      margin-bottom: 15px;
    }

    .preview-content {
      background: white;
      padding: 20px;
      border-radius: 10px;
      box-shadow: 0 3px 10px rgba(0, 0, 0, 0.05);
      margin-bottom: 20px;
    }

    .preview-image {
      max-width: 100%;
      border-radius: 10px;
      margin-bottom: 15px;
    }

    .hidden {
      display: none;
    }

    .share-section {
      text-align: center;
      margin-top: 20px;
      padding: 20px;
      background: #f0f8ff;
      border-radius: 15px;
    }

    .share-link {
      background: white;
      padding: 15px;
      border-radius: 10px;
      margin: 15px 0;
      word-break: break-all;
      font-family: monospace;
      border: 2px dashed #ff4d6d;
    }

    .copy-btn {
      background: #4CAF50;
      margin-top: 10px;
    }

    .copy-btn:hover {
      background: #45a049;
    }

    .valentine-display {
      text-align: center;
      padding: 30px;
    }

    .valentine-name {
      font-size: 2.5rem;
      color: #ff4d6d;
      margin: 20px 0;
    }

    .valentine-message {
      font-size: 1.2rem;
      line-height: 1.6;
      margin: 20px 0;
      padding: 20px;
      background: #fff9f9;
      border-radius: 15px;
      border-left: 5px solid #ff4d6d;
    }

    .gallery {
      --d: 10s;
      display: grid;
      place-items: center;
      width: 220px;
      margin: 30px auto;
    }

    .gallery > img {
      grid-area: 1/1;
      width: 100%;
      aspect-ratio: 1;
      object-fit: cover;
      border: 10px solid #f2f2f2;
      box-shadow: 0 0 4px #0007;
      z-index: 2;
      animation: slide var(--d) infinite, z-order var(--d) infinite steps(1);
    }

    .gallery img:last-child {
      animation-name: slide, z-order-last;
    }

    .gallery > img:nth-child(1) { animation-delay: calc(0*var(--d)); --r: 16deg; }
    .gallery > img:nth-child(2) { animation-delay: calc(-0.2*var(--d)); --r: -1deg; }
    .gallery > img:nth-child(3) { animation-delay: calc(-0.4*var(--d)); --r: -19deg; }
    .gallery > img:nth-child(4) { animation-delay: calc(-0.6*var(--d)); --r: 6deg; }
    .gallery > img:nth-child(5) { animation-delay: calc(-0.8*var(--d)); --r: -8deg; }

    @keyframes slide {
      10% { transform: translateX(120%) rotate(var(--r)); }
      0%, 100%, 20% { transform: translateX(0%) rotate(var(--r)); }
    }

    @keyframes z-order {
      10%, 20% { z-index: 1; }
      80% { z-index: 2; }
    }

    @keyframes z-order-last {
      10%, 20% { z-index: 1; }
      90% { z-index: 2; }
    }

    .back-btn {
      background: #6c757d;
      margin-top: 20px;
    }

    .back-btn:hover {
      background: #5a6268;
    }

    footer {
      text-align: center;
      margin-top: 20px;
      color: #666;
      font-size: 0.9rem;
    }

    @media only screen and (max-width: 600px) {
      h1 {
        font-size: 1.8rem;
      }
      
      .content {
        padding: 20px;
      }
      
      .gallery {
        width: 150px;
      }
    }
  </style>
</head>
<body>
  <div class="container">
    <header>
      <h1>üíñ Valentine C√° Nh√¢n H√≥a üíñ</h1>
      <p class="subtitle">T·∫°o trang Valentine ƒë·∫∑c bi·ªát d√†nh cho ng∆∞·ªùi ·∫•y</p>
    </header>
    
    <div class="content">
      <!-- Form t·∫°o Valentine -->
      <div id="creation-section">
        <div class="form-section">
          <h2>Th√¥ng tin c·ªßa b·∫°n</h2>
          <div class="input-group">
            <label for="user-name">T√™n c·ªßa b·∫°n</label>
            <input type="text" id="user-name" placeholder="Nh·∫≠p t√™n c·ªßa b·∫°n">
          </div>
          
          <div class="input-group">
            <label for="recipient-name">T√™n ng∆∞·ªùi nh·∫≠n</label>
            <input type="text" id="recipient-name" placeholder="Nh·∫≠p t√™n ng∆∞·ªùi b·∫°n y√™u th∆∞∆°ng">
          </div>
        </div>
        
        <div class="form-section">
          <h2>L·ªùi nh·∫Øn y√™u th∆∞∆°ng</h2>
          <div class="input-group">
            <label for="valentine-message">L·ªùi ch√∫c Valentine</label>
            <textarea id="valentine-message" placeholder="Vi·∫øt l·ªùi ch√∫c t·ª´ tr√°i tim c·ªßa b·∫°n..."></textarea>
          </div>
        </div>
        
        <div class="form-section">
          <h2>H√¨nh ·∫£nh ƒë·∫∑c bi·ªát</h2>
          <div class="input-group">
            <label for="image-url">URL h√¨nh ·∫£nh (t√πy ch·ªçn)</label>
            <input type="text" id="image-url" placeholder="https://example.com/image.jpg">
            <small>B·∫°n c√≥ th·ªÉ t·∫£i ·∫£nh l√™n imgur.com v√† d√°n link v√†o ƒë√¢y</small>
          </div>
        </div>
        
        <button id="create-btn" class="btn">T·∫°o Valentine C·ªßa T√¥i</button>
        
        <div class="preview-section">
          <h3 class="preview-title">Xem tr∆∞·ªõc</h3>
          <div class="preview-content">
            <p id="preview-text">Sau khi nh·∫≠p th√¥ng tin, b·∫°n s·∫Ω th·∫•y xem tr∆∞·ªõc t·∫°i ƒë√¢y</p>
          </div>
        </div>
      </div>
      
      <!-- Ph·∫ßn chia s·∫ª link -->
      <div id="share-section" class="hidden">
        <div class="share-section">
          <h2>Valentine c·ªßa b·∫°n ƒë√£ s·∫µn s√†ng!</h2>
          <p>Chia s·∫ª link n√†y v·ªõi ng∆∞·ªùi ·∫•y:</p>
          <div class="share-link" id="share-link">Link s·∫Ω xu·∫•t hi·ªán ·ªü ƒë√¢y</div>
          <button id="copy-btn" class="btn copy-btn">Sao ch√©p Link</button>
          <button id="new-valentine" class="btn back-btn">T·∫°o Valentine M·ªõi</button>
        </div>
      </div>
      
      <!-- Ph·∫ßn hi·ªÉn th·ªã Valentine -->
      <div id="valentine-display" class="valentine-display hidden">
        <h1 id="display-title">Happy Valentine's Day! üíû</h1>
        <div class="valentine-name" id="display-recipient"></div>
        
        <div class="gallery">
          <img src="https://images.unsplash.com/photo-1518568814500-bf0f8d125f46?ixlib=rb-1.2.1&auto=format&fit=crop&w=500&q=60" alt="Couple in love">
          <img src="https://images.unsplash.com/photo-1547471080-7cc2caa01a7e?ixlib=rb-1.2.1&auto=format&fit=crop&w=500&q=60" alt="Romantic sunset">
          <img src="https://images.unsplash.com/photo-1534528741775-53994a69daeb?ixlib=rb-1.2.1&auto=format&fit=crop&w=500&q=60" alt="Beautiful flowers">
          <img src="https://images.unsplash.com/photo-1511895426328-dc8714191300?ixlib=rb-1.2.1&auto=format&fit=crop&w=500&q=60" alt="Love heart">
          <img src="https://images.unsplash.com/photo-1542828437-c449e5e7b7c9?ixlib=rb-1.2.1&auto=format&fit=crop&w=500&q=60" alt="Romantic dinner">
        </div>
        
        <div class="valentine-message" id="display-message"></div>
        <p id="display-sender" style="font-style: italic; margin-top: 20px;"></p>
        
        <button id="back-to-creation" class="btn back-btn">T·∫°o Valentine M·ªõi</button>
      </div>
    </div>
  </div>
  
  <footer>
    <p>Made with ‚ù§Ô∏è | Chia s·∫ª t√¨nh y√™u c·ªßa b·∫°n ƒë·∫øn m·ªçi ng∆∞·ªùi</p>
  </footer>

  <script>
    document.addEventListener('DOMContentLoaded', function() {
      const creationSection = document.getElementById('creation-section');
      const shareSection = document.getElementById('share-section');
      const valentineDisplay = document.getElementById('valentine-display');
      const createBtn = document.getElementById('create-btn');
      const copyBtn = document.getElementById('copy-btn');
      const newValentineBtn = document.getElementById('new-valentine');
      const backToCreationBtn = document.getElementById('back-to-creation');
      const shareLink = document.getElementById('share-link');
      
      const userNameInput = document.getElementById('user-name');
      const recipientNameInput = document.getElementById('recipient-name');
      const messageInput = document.getElementById('valentine-message');
      const imageUrlInput = document.getElementById('image-url');
      
      const displayRecipient = document.getElementById('display-recipient');
      const displayMessage = document.getElementById('display-message');
      const displaySender = document.getElementById('display-sender');
      const previewText = document.getElementById('preview-text');
      
      // Ki·ªÉm tra xem c√≥ tham s·ªë URL kh√¥ng (trang hi·ªÉn th·ªã Valentine)
      const urlParams = new URLSearchParams(window.location.search);
      const valentineData = urlParams.get('data');
      
      if (valentineData) {
        // Hi·ªÉn th·ªã trang Valentine
        showValentineDisplay(valentineData);
      }
      
      // C·∫≠p nh·∫≠t preview
      function updatePreview() {
        const userName = userNameInput.value || 'B·∫°n';
        const recipientName = recipientNameInput.value || 'Ng∆∞·ªùi ·∫•y';
        const message = messageInput.value || 'L·ªùi ch√∫c t·ª´ tr√°i tim...';
        
        previewText.innerHTML = `
          <strong>${userName}</strong> g·ª≠i ƒë·∫øn <strong>${recipientName}</strong>:<br><br>
          "${message.substring(0, 100)}${message.length > 100 ? '...' : ''}"
        `;
      }
      
      userNameInput.addEventListener('input', updatePreview);
      recipientNameInput.addEventListener('input', updatePreview);
      messageInput.addEventListener('input', updatePreview);
      
      // T·∫°o Valentine
      createBtn.addEventListener('click', function() {
        const userName = userNameInput.value.trim();
        const recipientName = recipientNameInput.value.trim();
        const message = messageInput.value.trim();
        const imageUrl = imageUrlInput.value.trim();
        
        if (!userName || !recipientName || !message) {
          alert('Vui l√≤ng ƒëi·ªÅn ƒë·∫ßy ƒë·ªß th√¥ng tin!');
          return;
        }
        
        // T·∫°o d·ªØ li·ªáu Valentine
        const valentineData = {
          u: userName,
          r: recipientName,
          m: message,
          i: imageUrl
        };
        
        // M√£ h√≥a d·ªØ li·ªáu th√†nh chu·ªói base64
        const encodedData = btoa(JSON.stringify(valentineData));
        
        // T·∫°o link chia s·∫ª
        const shareUrl = `${window.location.origin}${window.location.pathname}?data=${encodedData}`;
        
        // Hi·ªÉn th·ªã ph·∫ßn chia s·∫ª
        creationSection.classList.add('hidden');
        shareSection.classList.remove('hidden');
        shareLink.textContent = shareUrl;
      });
      
      // Sao ch√©p link
      copyBtn.addEventListener('click', function() {
        navigator.clipboard.writeText(shareLink.textContent)
          .then(() => {
            alert('ƒê√£ sao ch√©p link v√†o clipboard!');
          })
          .catch(err => {
            console.error('L·ªói khi sao ch√©p: ', err);
          });
      });
      
      // T·∫°o Valentine m·ªõi
      newValentineBtn.addEventListener('click', function() {
        shareSection.classList.add('hidden');
        creationSection.classList.remove('hidden');
        
        // Reset form
        userNameInput.value = '';
        recipientNameInput.value = '';
        messageInput.value = '';
        imageUrlInput.value = '';
        updatePreview();
      });
      
      // Quay l·∫°i t·∫°o Valentine m·ªõi
      backToCreationBtn.addEventListener('click', function() {
        valentineDisplay.classList.add('hidden');
        creationSection.classList.remove('hidden');
        
        // Reset form
        userNameInput.value = '';
        recipientNameInput.value = '';
        messageInput.value = '';
        imageUrlInput.value = '';
        updatePreview();
      });
      
      // Hi·ªÉn th·ªã trang Valentine
      function showValentineDisplay(encodedData) {
        try {
          // Gi·∫£i m√£ d·ªØ li·ªáu
          const valentineData = JSON.parse(atob(encodedData));
          
          // Hi·ªÉn th·ªã th√¥ng tin
          displayRecipient.textContent = valentineData.r;
          displayMessage.textContent = valentineData.m;
          displaySender.textContent = `From: ${valentineData.u} ‚ù§Ô∏è`;
          
          // ·∫®n ph·∫ßn t·∫°o v√† hi·ªÉn th·ªã ph·∫ßn Valentine
          creationSection.classList.add('hidden');
          shareSection.classList.add('hidden');
          valentineDisplay.classList.remove('hidden');
          
          // N·∫øu c√≥ ·∫£nh, th√™m v√†o gallery
          if (valentineData.i) {
            const gallery = document.querySelector('.gallery');
            const newImage = document.createElement('img');
            newImage.src = valentineData.i;
            newImage.alt = '·∫¢nh c√° nh√¢n h√≥a';
            gallery.appendChild(newImage);
            
            // Th√™m CSS animation cho ·∫£nh m·ªõi
            const style = document.createElement('style');
            const totalImages = document.querySelectorAll('.gallery img').length;
            style.textContent = `
              .gallery > img:nth-child(${totalImages}) {
                animation-delay: calc(-${(totalImages-1)*0.2}*var(--d));
                --r: ${(totalImages % 2 === 0 ? -1 : 1) * (5 + totalImages * 3)}deg;
              }
            `;
            document.head.appendChild(style);
          }
        } catch (error) {
          console.error('L·ªói khi gi·∫£i m√£ d·ªØ li·ªáu:', error);
          alert('Link Valentine kh√¥ng h·ª£p l·ªá!');
        }
      }
    });
  </script>
</body>
</html>